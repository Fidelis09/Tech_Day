<div class="financeiro-container">
    <h2>💰 Painel Financeiro</h2>

    <!-- ======== BLOCOS DE RESUMO ======== -->
    <div class="cards-financeiro">
        <div class="card-fin">
            <h3>Lucro Bruto (Mês)</h3>
            <p>R$ {{ "{:,.2f}".format(lucro_bruto) }}</p>
        </div>

        <div class="card-fin">
            <h3>Lucro Líquido (Mês)</h3>
            <p>R$ {{ "{:,.2f}".format(lucro_liquido) }}</p>
        </div>

        <div class="card-fin">
            <h3>Gastos com Monitores</h3>
            <p>R$ {{ "{:,.2f}".format(gastos_monitores) }}</p>
        </div>

        <div class="card-fin">
            <h3>Previsão de Receita Futura</h3>
            <p>R$ {{ "{:,.2f}".format(receitas_futuras) }}</p>
        </div>
    </div>

    <!-- ======== GRÁFICO DE LUCROS MENSAIS ======== -->
    <div class="grafico-container">
        <h3>📈 Estatísticas de Lucro Mensal</h3>
        <canvas id="graficoLucro"></canvas>
    </div>
</div>

<!-- ======== ESTILOS ======== -->
<style>
.financeiro-container {
    padding: 20px;
}
.cards-financeiro {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
}
.card-fin {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    padding: 20px;
    text-align: center;
}
.card-fin h3 {
    font-size: 1rem;
    color: #555;
}
.card-fin p {
    font-size: 1.4rem;
    font-weight: bold;
    color: #2e8b57;
}
.grafico-container {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    padding: 20px;
    margin-bottom: 30px;
}
</style>

<!-- ======== CHART.JS ======== -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const meses = JSON.parse('{{ meses | tojson | safe }}');
const lucros = JSON.parse('{{ lucros_mensais | tojson | safe }}');

// Gráfico de lucros mensais
new Chart(document.getElementById('graficoLucro'), {
    type: 'line',
    data: {
        labels: meses,
        datasets: [{
            label: 'Lucro Mensal (R$)',
            data: lucros,
            borderColor: '#2e8b57',
            backgroundColor: 'rgba(46,139,87,0.2)',
            fill: true,
            tension: 0.3
        }]
    },
    options: {
        responsive: true,
        plugins: {
            legend: { position: 'bottom' },
            tooltip: { mode: 'index', intersect: false }
        }
    }
});
</script>
